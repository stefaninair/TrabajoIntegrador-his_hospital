extends ../layout

block content
  //- Botón volver al inicio (MOVIDO AQUÍ)
  a(href='/', style="display:inline-block; margin-bottom: 20px; padding: 8px 16px; background:#ccc; color:black; text-decoration:none; border-radius:4px;") Inicio HIS Hospital

  h1 Lista de Pacientes

  //- Contenedor para centrar el buscador y el botón de nuevo paciente
  div(style="text-align: center; margin-bottom: 20px;")
    input#buscadorDNI(type='text', placeholder='Buscar paciente por DNI...', style="padding:10px; width: 350px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px; vertical-align: middle;")
    a(href='/pacientes/nuevo', style="display:inline-block; margin-left: 20px; padding: 10px 20px; background:#4CAF50; color:white; text-decoration:none; border-radius:4px; font-size: 16px; vertical-align: middle;") ➕ Nuevo Paciente

  //- Contenedor para centrar la tabla
  div(style="display: flex; justify-content: center;") 
    //- Tabla de pacientes
    table#tablaPacientes(border='1', style="margin-top: 10px; width: auto; border-collapse: separate; border-spacing: 2px; border: 3px double black;")
      thead
        tr
          th(style="padding: 8px; border: 1px solid #ddd;") N° de DNI
          th(style="padding: 8px; border: 1px solid #ddd;") Nombre y Apellido
          th(style="padding: 8px; border: 1px solid #ddd;") Acciones 
      tbody
        each paciente in pacientes
          tr
            td.dni(style="padding: 8px; border: 1px solid #ddd;")= paciente.dni
            td(style="padding: 8px; border: 1px solid #ddd;")
              a(href=`/pacientes/editar/${paciente.id}`, style="text-decoration:none; color: #007bff; font-weight: bold;")
                = `${paciente.apellido}, ${paciente.nombre}`
            td
              form(action=`/pacientes/eliminar/${paciente.id}`, method='POST', style=style="padding: 8px; border: 1px solid #ddd;")
                button(type='submit', onclick='return confirm("¿Eliminar este paciente?")', style='border:none; background:none; cursor:pointer; font-size: 18px; color: red;')
                  | 🗑
              
      //- Script para filtrar en tiempo real
  script.
    const input = document.getElementById('buscadorDNI');
    const filas = document.querySelectorAll('#tablaPacientes tbody tr');

    input.addEventListener('input', () => {
      const filtro = input.value.trim().toLowerCase();

      filas.forEach(fila => {
        const dni = fila.querySelector('.dni').textContent.toLowerCase();
        fila.style.display = dni.includes(filtro) ? '' : 'none';
      });
    });