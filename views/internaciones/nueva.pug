extends ../layout

block content
  h1 Internar paciente #{paciente.nombre} #{paciente.apellido}

  form(action=`/internaciones/nueva/${paciente.id}`, method="POST")
    label(for="motivo") Tipo de internaci√≥n:
    select#motivo(name="motivo", required onchange="mostrarCamposAdicionales(this.value)")
      option(value="") -- Seleccione --
      option(value="maternidad") Maternidad
      option(value="cirugia") Cirug√≠a programada
      option(value="derivacion") Derivaci√≥n m√©dica
      option(value="urgencia") Urgencia

    // Maternidad
    div#campos-maternidad(style="display:none; margin-top:10px;")
      h3 Maternidad

      div
        label Semanas de gestaci√≥n:
        div(style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 10px;")
          - for (let i = 1; i <= 36; i++)
            label(style="width: 45px;")
              input(type="radio", name="semanas_gestacion", value=i required)
              | #{i}

      div
        label Antecedentes m√©dicos:
        each antecedente in ["Hipertensi√≥n", "Diabetes gestacional", "Preeclampsia", "Parto prematuro"]
          div
            label
              input(type="checkbox", name="antecedentes_medicos", value=antecedente)
              | #{antecedente}

      div
        label Grupo sangu√≠neo:
        select(name="grupo_sanguineo")
          option(value="") --
          option(value="A") A
          option(value="B") B
          option(value="AB") AB
          option(value="O") O

      div
        label Factor RH:
        select(name="factor_rh")
          option(value="") --
          option(value="Positivo") Positivo
          option(value="Negativo") Negativo

      div
        label Resultados de estudios:
        select(name="resultados_estudios")
          option(value="") --
          option(value="Valores normales") Valores normales
          option(value="Medios") Medios
          option(value="A analizar") A analizar
        span(style="margin-left: 10px; font-size: 18px;") üìé Adjuntar (visual)

      div
        label Nombre del obstetra:
        select(name="nombre_obstetra")
          option(value="") --
          option(value="Dra. Su√°rez") Dra. Su√°rez
          option(value="Dr. G√≥mez") Dr. G√≥mez
          option(value="Dra. Ram√≠rez") Dra. Ram√≠rez
          option(value="Dr. L√≥pez") Dr. L√≥pez
          option(value="Dra. Villalba") Dra. Villalba

      div
        label Nombre del acompa√±ante:
        input(type="text", name="nombre_acompanante")

      div
        label Parentesco:
        select(name="parentesco_acompanante")
          option(value="") --
          option(value="Hermano") Hermano
          option(value="Padre") Padre
          option(value="Madre") Madre
          option(value="Pareja") Pareja
          option(value="Familiar") Familiar

    // Cirug√≠a
    div#campos-cirugia(style="display:none; margin-top:10px;")
      h3 Cirug√≠a Programada

      div
        label Autorizaci√≥n:
        select(name="autorizacion_cirugia")
          option(value="") --
          option(value="Aprobada") Aprobada
          option(value="Denegada") Denegada
          option(value="En proceso") En proceso

      div
        label Historia cl√≠nica:
        select(name="historia_clinica")
          option(value="") --
          option(value="Existente") Existente
          option(value="No existente") No existente

      div
        label Medicaci√≥n actual:
        select(name="medicamentos_actuales")
          option(value="") --
          option(value="Antibi√≥ticos") Antibi√≥ticos
          option(value="Analg√©sicos") Analg√©sicos
          option(value="Antiinflamatorios") Antiinflamatorios
          option(value="Anticoagulantes") Anticoagulantes
          option(value="Hipertensi√≥n + Tiroides") Hipertensi√≥n + Tiroides

      div
        label Preoperatorios realizados:
        select(name="preoperatorios")
          option(value="") --
          option(value="Electrocardiograma, an√°lisis, ecograf√≠a") Electrocardiograma, an√°lisis, ecograf√≠a
          option(value="Electrocardiograma, resonancia") Electrocardiograma, resonancia
          option(value="Electrocardiograma, estudios espec√≠ficos") Electrocardiograma, estudios espec√≠ficos

      div
        label Resultados de estudios:
        select(name="resultados_estudios_cirugia")
          option(value="") --
          option(value="Valores normales") Valores normales
          option(value="Medios") Medios
          option(value="A analizar") A analizar
        span(style="margin-left: 10px; font-size: 18px;") üìé Adjuntar (visual)

      div
        label Nombre del cirujano:
        select(name="nombre_cirujano")
          option(value="") --
          option(value="Dr. Quiroga") Dr. Quiroga
          option(value="Dra. Fern√°ndez") Dra. Fern√°ndez
          option(value="Dr. Mart√≠nez") Dr. Mart√≠nez
          option(value="Dra. L√≥pez") Dra. L√≥pez
          option(value="Dr. Torres") Dr. Torres

      div
        label Diagn√≥stico m√©dico:
        select(name="diagnostico_medico")
          option(value="") --
          option(value="Colecistitis aguda") Colecistitis aguda
          option(value="Hernia inguinal") Hernia inguinal
          option(value="Apendicitis aguda") Apendicitis aguda
          option(value="C√°ncer de colon") C√°ncer de colon
          option(value="Obstrucci√≥n intestinal") Obstrucci√≥n intestinal

      div
        label Tipo de intervenci√≥n:
        select(name="tipo_intervencion_quirurgica")
          option(value="") --
          option(value="Laparosc√≥pica") Laparosc√≥pica
          option(value="Convencional") Convencional
          option(value="Ambulatoria") Ambulatoria
          option(value="Emergente") Emergente
          option(value="Exploratoria") Exploratoria
          option(value="Programada") Programada

    // Derivaci√≥n m√©dica
    div#campos-derivacion(style="display:none; margin-top:10px;")
      h3 Derivaci√≥n M√©dica

      div
        label Nombre del m√©dico derivante:
        select(name="nombre_medico_derivante")
          option(value="") --
          option(value="Dr. N√∫√±ez") Dr. N√∫√±ez
          option(value="Dra. Sosa") Dra. Sosa
          option(value="Dr. Pereyra") Dr. Pereyra
          option(value="Dra. Mendoza") Dra. Mendoza

      div
        label Especialidad del m√©dico:
        select(name="especialidad_medico_derivante")
          option(value="") --
          option(value="Cl√≠nico") Cl√≠nico
          option(value="Ginecolog√≠a") Ginecolog√≠a
          option(value="Cardiolog√≠a") Cardiolog√≠a
          option(value="Neurolog√≠a") Neurolog√≠a
          option(value="Pediatr√≠a") Pediatr√≠a

      div
        label Diagn√≥stico:
        textarea(name="diagnostico_derivacion")

      div
        label Tratamiento inicial:
        select(name="tratamiento_inicial")
          option(value="") --
          option(value="Ninguno") Ninguno
          option(value="Medicaci√≥n") Medicaci√≥n
          option(value="Sueroterapia") Sueroterapia
          option(value="Contenci√≥n") Contenci√≥n

      div
        label Resultados de estudios:
        select(name="resultados_estudios_origen")
          option(value="") --
          option(value="Valores normales") Valores normales
          option(value="Medios") Medios
          option(value="A analizar") A analizar
        span(style="margin-left: 10px; font-size: 18px;") üìé Adjuntar (visual)

    // Urgencia
    div#campos-urgencia(style="display:none; margin-top:10px;")
      h3 Urgencia

      div
        label Modo de llegada:
        select(name="modo_llegada")
          option(value="") --
          option(value="Ambulancia") Ambulancia
          option(value="Particular") Veh√≠culo particular
          option(value="Polic√≠a") Polic√≠a
          option(value="Peat√≥n") Peat√≥n

      div
        label S√≠ntomas al ingreso:
        textarea(name="sintomas_al_ingreso")

      div
        label Signos vitales:
        select(name="signos_vitales_ingreso")
          option(value="") --
          option(value="Estables") Estables
          option(value="Inestables") Inestables
          option(value="Cr√≠ticos") Cr√≠ticos

      div
        label Estado de conciencia:
        select(name="nivel_conciencia")
          option(value="") --
          option(value="L√∫cido") L√∫cido
          option(value="Confuso") Confuso
          option(value="Inconsciente") Inconsciente

      div
        label Primeras intervenciones:
        each intervencion in ["RCP", "Ox√≠geno", "Sueroterapia", "Sedaci√≥n"]
          div
            label
              input(type="checkbox", name="primeras_intervenciones", value=intervencion)
              | #{intervencion}

      div
        label M√©dico que atendi√≥:
        select(name="nombre_medico_urgencias")
          option(value="") --
          option(value="Dr. Medina") Dr. Medina
          option(value="Dra. Ayala") Dra. Ayala
          option(value="Dr. Santill√°n") Dr. Santill√°n
          option(value="Dra. Herrera") Dra. Herrera

    br
    button(type="submit" style="margin-top: 15px; padding: 8px 16px;") Confirmar Internaci√≥n

  a(href="/pacientes", style="display:inline-block; margin-top:15px; padding:8px 16px; background:#ccc; border-radius:4px; text-decoration:none;") ‚Üê Volver

  script.
    function mostrarCamposAdicionales(valor) {
      document.getElementById("campos-maternidad").style.display = valor === "maternidad" ? "block" : "none";
      document.getElementById("campos-cirugia").style.display = valor === "cirugia" ? "block" : "none";
      document.getElementById("campos-derivacion").style.display = valor === "derivacion" ? "block" : "none";
      document.getElementById("campos-urgencia").style.display = valor === "urgencia" ? "block" : "none";
    }
