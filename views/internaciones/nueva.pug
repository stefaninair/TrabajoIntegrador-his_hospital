extends ../layout

block content
  h1 Internar paciente #{paciente.nombre} #{paciente.apellido}

  form(action=`/internaciones/nueva/${paciente.id}`, method="POST")
    label(for="motivo") Motivo de internación:
    select#motivo(name="motivo", required onchange="mostrarCamposAdicionales(this.value)")
      option(value="") -- Seleccione --
      option(value="cirugia") Cirugía programada
      option(value="derivacion") Derivación médica
      option(value="emergencia") Emergencia
    br

    // Campos específicos si es cirugía
    div#campos-cirugia(style="display:none; margin-top:10px; padding:10px; border:1px solid #ccc; border-radius:5px;")
      h3 Información adicional para cirugía
      label(for="preoperatorios") Preoperatorios:
      input(type="text", name="preoperatorios", placeholder="Ej: Laboratorio, ECG")
      br
      label(for="autorizaciones") Autorizaciones médicas:
      input(type="text", name="autorizaciones", placeholder="Autorización de obra social")
      br
      label(for="documentacion") Documentación:
      input(type="text", name="documentacion", placeholder="Fotocopia de DNI, etc.")
      br

    br
    label(for="id_habitacion") Seleccionar habitación disponible:
    select(name="id_habitacion", required)
      option(value="") -- Seleccionar habitación --
      each h in habitaciones
        option(value=h.id)= `${h.ala} - Habitación ${h.numero} (${h.cantidad_camas} camas)`

    br
    button(type="submit" style="margin-top: 15px; padding: 8px 16px;") Confirmar Internación

  a(href="/pacientes", style="display:inline-block; margin-top:15px; padding:8px 16px; background:#ccc; border-radius:4px; text-decoration:none;") ← Volver

  script.
    function mostrarCamposAdicionales(valor) {
      document.getElementById("campos-cirugia").style.display = (valor === "cirugia") ? "block" : "none";
    }
